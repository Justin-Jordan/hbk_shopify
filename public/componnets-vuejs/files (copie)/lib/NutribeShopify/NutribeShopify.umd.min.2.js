(("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]=("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]||[]).push([[2],{1276:function(e,t,n){"use strict";var r=n("d784"),i=n("44e7"),a=n("825a"),s=n("1d80"),o=n("4840"),c=n("8aa5"),l=n("50c4"),u=n("14c3"),d=n("9263"),f=n("d039"),v=[].push,p=Math.min,g=4294967295,h=!f((function(){return!RegExp(g,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(s(this)),a=void 0===n?g:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,a);var o,c,l,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=new RegExp(e.source,f+"g");while(o=d.call(h,r)){if(c=h.lastIndex,c>p&&(u.push(r.slice(p,o.index)),o.length>1&&o.index<r.length&&v.apply(u,o.slice(1)),l=o[0].length,p=c,u.length>=a))break;h.lastIndex===o.index&&h.lastIndex++}return p===r.length?!l&&h.test("")||u.push(""):u.push(r.slice(p)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var s=n(r,e,this,i,r!==t);if(s.done)return s.value;var d=a(e),f=String(this),v=o(d,RegExp),b=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),x=new v(h?d:"^(?:"+d.source+")",m),_=void 0===i?g:i>>>0;if(0===_)return[];if(0===f.length)return null===u(x,f)?[f]:[];var y=0,S=0,k=[];while(S<f.length){x.lastIndex=h?S:0;var C,w=u(x,h?f:f.slice(S));if(null===w||(C=p(l(x.lastIndex+(h?0:S)),f.length))===y)S=c(f,S,b);else{if(k.push(f.slice(y,S)),k.length===_)return k;for(var I=1;I<=w.length-1;I++)if(k.push(w[I]),k.length===_)return k;S=y=C}}return k.push(f.slice(y)),k}]}),!h)},"14c3":function(e,t,n){var r=n("c6b6"),i=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var a=n.call(e,t);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("5a34"),a=n("1d80"),s=n("ab13");r({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),a=n("9bf2"),s=r("unscopables"),o=Array.prototype;void 0==o[s]&&a.f(o,s,{configurable:!0,value:i(null)}),e.exports=function(e){o[s][e]=!0}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),a=n("b622"),s=a("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},6547:function(e,t,n){var r=n("a691"),i=n("1d80"),a=function(e){return function(t,n){var a,s,o=String(i(t)),c=r(n),l=o.length;return c<0||c>=l?e?"":void 0:(a=o.charCodeAt(c),a<55296||a>56319||c+1===l||(s=o.charCodeAt(c+1))<56320||s>57343?e?o.charAt(c):a:e?o.slice(c,c+2):s-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},"7ed1":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-group",class:[e.image.ShowCover?"bg-cover":""]},[n("div",{staticClass:"row"},[""===e.image.url?n("div",{staticClass:"col-sm-7"},[n("b-form-group",{attrs:{label:"Image"}},[n("b-form-file",{attrs:{accept:"image/*",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{change:e.previewAndSaveImage}})],1)],1):e._e(),n("div",{staticClass:"col-sm-4"},[e.image.url?n("div",[n("img",{staticClass:"img-fuild",staticStyle:{"max-width":"140px","max-height":"100px"},attrs:{alt:"",src:e.image.url}})]):e._e()]),""!==e.image.url?n("div",{staticClass:"col-sm-7"},[n("ButtonDelete",{attrs:{running:e.running},on:{"ev-click":function(t){return e.$emit("ev-delete-file",e.image.key)}}})],1):e._e()]),n("h4",{staticClass:"text-wait"},[e._v("Patientez ...")])])},i=[],a=(n("b0c0"),n("d3b7"),n("e6cf"),n("ac1f"),n("1276"),n("7261")),s={name:"ImageShopify",props:{image:{type:Object,required:!0,validator:function(e){return!(!e.url&&""!=e.url||!e.alt&&""!=e.alt||!e.key&&""!=e.key||!e.filename&&""!=e.filename)},default:function(){return{url:"",alt:"",title:"",filename:"",key:"",ShowCover:!1}}}},components:{ButtonDelete:a["b"]},data:function(){return{running:!1}},mounted:function(){},watch:{},computed:{},methods:{previewAndSaveImage:function(e){var t=this;e.target.files&&e.target.files[0]&&t.getBase64(e.target.files[0]).then((function(e){t.$emit("image-save",e)}))},getBase64:function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){var n=r.result.split(",");t({src:r.result,base64:n[1],name:e.name})},r.onerror=function(e){return n(e)}}))}}},o=s,c=n("2877"),l=Object(c["a"])(o,r,i,!1,null,"29217290",null);t["a"]=l.exports},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),i=n("9f7f"),a=RegExp.prototype.exec,s=String.prototype.replace,o=a,c=function(){var e=/a/,t=/b*/g;return a.call(e,"a"),a.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(o=function(e){var t,n,i,o,d=this,f=l&&d.sticky,v=r.call(d),p=d.source,g=0,h=e;return f&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(p="(?: "+p+")",h=" "+h,g++),n=new RegExp("^(?:"+p+")",v)),u&&(n=new RegExp("^"+p+"$(?!\\s)",v)),c&&(t=d.lastIndex),i=a.call(f?n:d,h),f?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:c&&i&&(d.lastIndex=d.global?i.index+i[0].length:t),u&&i&&i.length>1&&s.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i}),e.exports=o},"9f7f":function(e,t,n){"use strict";var r=n("d039");function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("23cb"),a=n("a691"),s=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),v=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!v},{splice:function(e,t){var n,r,u,d,f,v,m=o(this),x=s(m.length),_=i(e,x),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=x-_):(n=y-2,r=g(p(a(t),0),x-_)),x+n-r>h)throw TypeError(b);for(u=c(m,r),d=0;d<r;d++)f=_+d,f in m&&l(u,d,m[f]);if(u.length=r,n<r){for(d=_;d<x-r;d++)f=d+r,v=d+n,f in m?m[v]=m[f]:delete m[v];for(d=x;d>x-r+n;d--)delete m[d-1]}else if(n>r)for(d=x-r;d>_;d--)f=d+r-1,v=d+n-1,f in m?m[v]=m[f]:delete m[v];for(d=0;d<n;d++)m[d+_]=arguments[d+2];return m.length=x-r+n,u}})},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c975:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,a=n("a640"),s=n("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},c9a4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex text-center text-white mb-4"},[n("div",{staticClass:"w-50 p-3 border click-pointer",class:{"bg-secondary":"manage_block"!=e.current_tab,"bg-primary":"manage_block"==e.current_tab},on:{click:function(t){return e.select_curent_tabs("manage_block")}}},[e._v(" Gerer les saveurs "),e.loading_blocs?n("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]),n("div",{staticClass:"w-50 p-3 border click-pointer",class:{"bg-secondary":"associate_variants"!=e.current_tab,"bg-primary":"associate_variants"==e.current_tab},on:{click:function(t){return e.select_curent_tabs("associate_variants")}}},[e._v(" Associer les ingredients Ã  la saveur "),e.loading_association?n("i",{staticClass:"fas fa-sync fa-spin "}):e._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"associate_variants"==e.current_tab,expression:"current_tab == 'associate_variants'"}]},[n("menus-buttons",{attrs:{group_buttons:e.menus},on:{"ev-menu-button":e.evMenuButton}}),n("b-form-group",{attrs:{label:"Selectionner le block d'ingredient"}},[n("b-form-select",{attrs:{options:e.section_ingredientsOptions},on:{change:e.AddIngredient},model:{value:e.selected_option,callback:function(t){e.selected_option=t},expression:"selected_option"}})],1),n("div",e._l(e.listSelectedIngredients,(function(t,r){return n("div",{key:r,staticClass:"d-flex align-items-center drap-drop-box pl-3"},[n("div",{staticClass:"w-100"},[n("b-form-group",{attrs:{label:"reference du block ingredient"}},[n("b-form-input",{attrs:{placeholder:"Nom de la serveur",readonly:""},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"listSelectedIngredient.text"}})],1)],1),n("div",{staticClass:"pl-3"},[n("b-button",{staticClass:"border-0",attrs:{size:"sm",variant:"outline-danger"},on:{click:function(n){return e.DeleteAssociateIngredient(t.index_saveur,t.value)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)],1)])})),0)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"manage_block"==e.current_tab,expression:"current_tab == 'manage_block'"}]},[n("b-form-group",{attrs:{label:"Selectionner la saveur"}},[n("b-form-select",{attrs:{options:e.variantsOptions1},on:{change:e.AddSaveur},model:{value:e.selected_option,callback:function(t){e.selected_option=t},expression:"selected_option"}})],1),n("b-form",e._l(e.saveurs,(function(t,r){return n("div",{key:r,staticClass:"drap-drop-box pl-3"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"w-100"},[n("b-form-group",{attrs:{label:"Nom de la sarveur"}},[n("b-form-input",{attrs:{placeholder:"Nom de la serveur",readonly:""},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"saveur.id"}})],1),n("b-form-group",{staticClass:"d-none",attrs:{label:"Image de la saveur",description:"l'image doit etre un texte svg"}},[n("b-form-textarea",{attrs:{placeholder:"votre texte svg ici",rows:"3","max-rows":"6"},model:{value:t.content,callback:function(n){e.$set(t,"content",n)},expression:"saveur.content"}})],1),n("image-shopify",{attrs:{image:t.image},on:{"image-save":function(n){return e.ImageSave.apply(void 0,[t.image].concat(n))},"ev-delete-file":function(n){return e.DeleteFile.apply(void 0,[t.image].concat(n))}}})],1),n("div",{staticClass:"p-3"},[n("b-button",{staticClass:"border-0",attrs:{size:"sm",variant:"outline-danger"},on:{click:function(t){return e.DeleteSaveur(r)}}},[n("b-icon",{attrs:{icon:"trash"}})],1)],1)])])})),0)],1),n("hr"),n("div",{staticClass:"d-flex justify-content-between"},[n("ButtonSave",{attrs:{running:e.running},on:{"ev-click":e.onSubmit}})],1)])},i=[],a=(n("4160"),n("caad"),n("c975"),n("a434"),n("b0c0"),n("2532"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex text-center text-white mb-4"},e._l(e.group_buttons,(function(t,r){return n("div",{key:r,class:{"w-100":e.v_100},attrs:{"data-index":r}},[n("span",{staticClass:" px-3 py-2 border click-pointer d-block",class:{"bg-secondary":e.current_onglet!==t.id,"bg-primary":e.current_onglet===t.id},domProps:{innerHTML:e._s(t.value)},on:{click:function(n){return e.select_curent_onglet(t,r)}}})])})),0)])}),s=[],o=n("5530"),c={name:"MenusButtons",props:{group_buttons:{type:Array,validator:function(e){return e.length,!0}},v_100:{type:Boolean,default:!1}},data:function(){return{current_onglet:""}},watch:{group_buttons:{deep:!0,handler:function(e){e[0]&&this.select_curent_onglet(e[0],0)}}},computed:{},mounted:function(){},methods:{select_curent_onglet:function(e,t){this.current_onglet=e.id,this.$emit("ev-menu-button",Object(o["a"])({index:t},e))}}},l=c,u=n("2877"),d=Object(u["a"])(l,a,s,!1,null,null,null),f=d.exports,v=n("7261"),p=n("cc84"),g=n("7ed1");function h(){return{id:"",content:"",image:{url:"",alt:"",ShowCover:!1,filename:"",key:""},blocks:[]}}var b={name:"GestionSaveurs",props:{entity:{type:Object,required:!0},typeEntity:{type:String,required:!0,validator:function(e){return"product"===e}}},components:{"menus-buttons":f,ButtonSave:v["c"],"image-shopify":g["a"]},data:function(){var e="saveurs";return{loading_blocs:!1,loading_association:!1,current_tab:"manage_block",saveurs:[],selected_option:"",section_ingredients:{},SelectedIndredientMenu:{},keyMetafield:e,running:!1}},mounted:function(){this.GetProductMetafield()},watch:{},computed:{variantsOptions1:function(){var e=[],t={};if(this.entity.variants)for(var n in this.entity.variants){var r=this.entity.variants[n];this.VariantHasSelected(r.option1)||t[r.option1]||(t[r.option1]=!0,e.push({text:r.option1,value:r.option1}))}return e},menus:function(){var e=[];if(this.saveurs.length)for(var t in this.saveurs){var n=this.saveurs[t];e.push({id:n.id,value:n.id})}return e},section_ingredientsOptions:function(){var e=[];if(this.section_ingredients)for(var t in this.section_ingredients){var n=this.section_ingredients[t];this.IngredientHasSelected(t)||e.push({text:t+" : "+n.titrefp,value:t})}return e},listSelectedIngredients:function(){var e=this,t=[];if(this.saveurs.length){var n=function(n){var r=e.saveurs[n];r.id===e.SelectedIndredientMenu.id&&r.blocks.forEach((function(r){var i=e.section_ingredients[r];i&&t.push({text:r+" : "+i.titrefp,value:r,index_saveur:parseInt(n)})}))};for(var r in this.saveurs)n(r)}return t}},methods:{evMenuButton:function(e){this.SelectedIndredientMenu=e},AddSaveur:function(e){var t=h();t.id=e,this.saveurs.push(t)},AddIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var t in this.saveurs){var n=this.saveurs[t];if(n.id===this.SelectedIndredientMenu.id)return void(e&&this.saveurs[t].blocks.push(e))}},buildListSelectedIngredients:function(e,t){var n=this;this.listSelectedIngredients=[],e.forEach((function(e){if(n.section_ingredients[e]){var r=n.section_ingredients[e];n.listSelectedIngredients.push({text:e+" : "+r.titrefp,value:e,index_saveur:t})}}))},select_curent_tabs:function(e){this.current_tab=e},IngredientHasSelected:function(e){for(var t in this.saveurs){var n=this.saveurs[t].blocks;if(n.includes(e))return!0;var r=parseInt(t)+t;if(r==this.saveurs.length)return!1}},VariantHasSelected:function(e){if(!this.saveurs.length)return!1;for(var t in this.saveurs){var n=this.saveurs[t];if(n.id===e)return!0;var r=parseInt(t)+1;if(this.saveurs.length===r)return!1}},onSubmit:function(){var e=this;this.running=!0,p["a"].SaveMetaFieldProduct(this.saveurs,this.keyMetafield,this.entity.id).then((function(){e.running=!1}))},GetProductMetafield:function(){var e=this;this.entity.id&&p["a"].GetProductMetafield(this.entity.id).then((function(t){for(var n in t){var r=t[n];switch(r.key){case"section_ingredients":""!==r.value&&(e.section_ingredients=JSON.parse(r.value));break;case"saveurs":""!==r.value&&(e.saveurs=JSON.parse(r.value));break}}}))},DeleteSaveur:function(e){this.saveurs[e]&&this.saveurs.splice(e,1)},DeleteAssociateIngredient:function(e,t){if(console.log("DeleteAssociateIngredient : ",e,"   ",t),this.saveurs[e]){var n=this.saveurs[e].blocks.indexOf(t);void 0!==n&&this.saveurs[e].blocks.splice(n,1)}},ImageSave:function(e,t){e.ShowCover=!0,p["a"].SaveImage(t).then((function(n){e.ShowCover=!1,n&&n.key&&(e.key=n.key,e.url=n.public_url,e.filename=t.name)}))},DeleteFile:function(e,t){e.ShowCover=!0,p["a"].DeleteFile(t).then((function(t){e.ShowCover=!1,t&&(e.key="",e.url="",e.filename="")}))}}},m=b,x=Object(u["a"])(m,r,i,!1,null,"13387180",null);t["default"]=x.exports},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,a=n("44d2"),s=n("ae40"),o=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!o},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),a=n("b622"),s=n("9263"),o=n("9112"),c=a("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),v=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var p=a(e),g=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=g&&!i((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!g||!h||"replace"===e&&(!l||!u||f)||"split"===e&&!v){var b=/./[p],m=n(p,""[e],(function(e,t,n,r,i){return t.exec===s?g&&!i?{done:!0,value:b.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),x=m[0],_=m[1];r(String.prototype,e,x),r(RegExp.prototype,p,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&o(RegExp.prototype[p],"sham",!0)}}}]);
//# sourceMappingURL=NutribeShopify.umd.min.2.js.map