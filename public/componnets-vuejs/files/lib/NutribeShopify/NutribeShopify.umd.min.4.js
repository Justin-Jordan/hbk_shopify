(("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]=("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]||[]).push([[4,6],{"0ccb":function(t,e,a){"use strict";var i=a("44d7"),s=a.n(i);s.a},"44d7":function(t,e,a){},"51a0":function(t,e,a){"use strict";var i=a("b2ed"),s=a.n(i);s.a},"712d":function(t,e,a){"use strict";var i=a("9430"),s=a.n(i);s.a},"7c83":function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ajax",{attrs:{numbre_request:t.trigger_request,data:t.data_post,token:t.ajax_token,debug:!1,show_alert_msg:t.show_alert_msg,messages:t.ajax_messages},on:{ev_ajax_success:t.ev_ajax_success,ev_ajax_error:t.ev_ajax_error}}),a("table",{attrs:{id:t.table_id}}),a("modal-slot",{attrs:{id_modal:t.formated_id_modal,show_footer:!0,modal_position:""},scopedSlots:t._u([{key:"modal_header",fn:function(){return[a("h5",{staticClass:"modal-title",domProps:{innerHTML:t._s(t.modal_title)}})]},proxy:!0}])},[t.modal_loading?a("div",{staticClass:"d-flex justify-content-center p-5"},[a("h2",[a("i",{staticClass:"fas fa-sync fa-spin text-warning"})])]):t._e(),a(t.template_modalbody,{directives:[{name:"show",rawName:"v-show",value:!t.modal_loading,expression:"!modal_loading"}],ref:"composant",tag:"component",attrs:{blog:t.blog_select,blogs:t.blogs,metafields:t.metafields,form_running:t.form_running,parent_init:!0},on:{ev_index:t.ev_index}})],1)],1)},o=[],l=a("cc84"),n=a("6f2e"),r=a("c6de"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ajax",{attrs:{numbre_request:t.trigger_request,data:t.data_post,token:t.ajax_token,debug:!1,show_alert_msg:t.show_alert_msg,messages:t.ajax_messages},on:{ev_ajax_success:t.ev_ajax_success,ev_ajax_error:t.ev_ajax_error}}),t.parent_init?t._e():a("div",t._l(t.blogs,(function(e){return a("div",{key:e.id,staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_blog,expression:"id_blog"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"id"+e.id},domProps:{value:e.id,checked:t._q(t.id_blog,e.id)},on:{change:function(a){t.id_blog=e.id}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"id"+e.id},domProps:{innerHTML:t._s(e.title)}})])})),0),a(t.template_modal_body,{ref:"modal_simple",tag:"component",attrs:{actionparent:t.actionparent,id_modal:t.formated_id_modal,modal_body:t.modal_body,titre_modal_preview:t.titre_modal,customdatas1:t.blog_category,customdatas3:t.template_edit_running,modal_position:""},on:{ev_modal_simple:t.ev_modal_simple}})],1)},d=[],c=(a("c975"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("e6cf"),a("96cf"),a("1da1")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:[t.type_modal_bootstrap?"modal fade":"modal-custom "+t.formated_open_modal_custom],attrs:{id:t.id_modal,role:"dialog","aria-labelledby":t.id_modal+"Label","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",class:t.modal_position,attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:t.id_modal+"Label"},domProps:{innerHTML:t._s(t.titre_modal)}}),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.close_and_false}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a(t.template_modal_body,{ref:"cpts_modal_simple",tag:"component",attrs:{modal_body:t.datas_modal_body,customdatas1:t.customdatas1,customdatas2:t.customdatas2,customdatas3:t.customdatas3,customdatas4:t.customdatas4,doaction:t.actionparent,is_runing:t.is_runing},on:{ev_modal_simple:t.ev_modal_simple}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_footer,expression:"show_footer"}],staticClass:"modal-footer "},[a(t.template_modal_footer,{tag:"component",attrs:{modal_footer:t.datas_modal_footer,is_runing:t.is_runing},on:{ev_modal_simple_footer:t.ev_modal_simple_footer}})],1)])])])])},m=[];window.jQuery?i=window.jQuery:window.$&&(i=window.$);var g,f={name:"ModalSimple",props:{datas_modal_body:[Object,Array,String,Number],datas_modal_footer:[Object,Array,String,Number],id_modal:{type:String,default:"myModal"},type_modal_bootstrap:{type:Boolean,default:!0},modal_position:{type:String,default:"modal-dialog-centered"},titre_modal_preview:{type:String,default:"titre du modal"},template_modal_body:{type:[String,Object],default:""},template_modal_footer:{type:[Object,String],default:""},open_modal_custom:{type:Boolean,default:!1},show_footer:{type:Boolean,default:!0},actionparent:[Object,Array,String,Number],is_runing:{type:[Boolean],default:!1},customdatas1:[Object,Array,String,Number,Boolean],customdatas2:[Object,Array,String,Number,Boolean],customdatas3:[Object,Array,String,Number,Boolean],customdatas4:[Object,Array,String,Number,Boolean]},data:function(){return{modal_custom_class:""}},computed:{titre_modal:{get:function(){return decodeURIComponent(this.titre_modal_preview)}},formated_open_modal_custom:{get:function(){return this.open_modal_custom?"show-custom-modal":""}}},methods:{ev_modal_simple:function(t){this.$emit("ev_modal_simple",t)},ev_modal_simple_footer:function(t){this.$emit("ev_modal_simple_footer",t)},close_and_false:function(){this.type_modal_bootstrap?i("#"+this.id_modal).modal("hide"):this.$emit("ev_modal_simple",{action:"close"})},close_modal_confirm:function(){alert("")}}},b=f,p=(a("51a0"),a("2877")),h=Object(p["a"])(b,u,m,!1,null,"51afd5d8",null),v=h.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex text-center text-white mb-4"},[a("div",{staticClass:"w-50 p-3 border click-pointer",class:{"bg-secondary":"manage_block"!=t.current_tab,"bg-primary":"manage_block"==t.current_tab},on:{click:function(e){return t.select_curent_tabs("manage_block")}}},[t._v(" Liste des catégories "),t.loading_blocs?a("i",{staticClass:"fas fa-sync fa-spin "}):t._e()]),a("div",{staticClass:"w-50 p-3 border click-pointer",class:{"bg-secondary":"associate"!=t.current_tab,"bg-primary":"associate"==t.current_tab},on:{click:function(e){return t.select_curent_tabs("associate")}}},[t._v(" Associer les articles "),t.loading_association?a("i",{staticClass:"fas fa-sync fa-spin "}):t._e()])]),a("alert",{attrs:{_formated_alert_trigger_show:t.formated_alert_trigger_show,show_alert:t.show_alert,alert_attribut_class:t.class_alert,alert_message:t.alert_message},on:{ev_alert_close:t.alert_close_static}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"manage_block"==t.current_tab,expression:"current_tab == 'manage_block'"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:"liste_bloc"==t.display_bloc,expression:"display_bloc == 'liste_bloc'"}]},[a("tableau-gestion",{ref:"tableau_gestion",attrs:{show_id:!0,show_action:!0,class_table:"array-liste-datas categories",rows:t.customdatas1,headers:t.table_headers,empty_message:t.table_empty_message,table_title:t.table_title,show_title:t.table_show_title,template_footer:t.table_template_footer,datas_footer:t.table_datas_footer,is_running:t.table_select_blog_is_running,template_tableau_action:t.table_template_tableau_action,template_edit:t.table_template_edit,datas_ligne_edit:t.table_datas_ligne_edit,template_edit_is_runing:t.table_template_edit_is_runing,template_tableau_index:t.template_tableau_index},on:{ev_action_ev_template_tableau_action:t.ev_action_ev_template_tableau_action,ev_template_edit:t.ev_template_edit}}),a("gestion-blocs-edit",{attrs:{is_runing:t.template_ordering_is_runing,configs:{display_add_button:!0}},on:{ev_custom_submit:t.ev_custom_submit_parent}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"form-edit"==t.display_bloc,expression:"display_bloc == 'form-edit'"}]},[a("h4",[t._v("Editer la categorie")]),a("builder-forms",{ref:"builderformsedit",attrs:{forms:t.formated_forms_edit,show_submit:!1,form_contain_class:"w-100 ",form_class:"row-0",template_submit:t.template_submit,custom_template_edit_is_runing:t.template_edit_is_runing},on:{ev_builder_forms:t.ev_builder_forms}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"form-add"==t.display_bloc,expression:"display_bloc == 'form-add'"}]},[a("builder-forms",{ref:"builderformsadd",attrs:{forms:t.formated_forms_add,show_submit:!1,form_contain_class:"w-100 ",form_class:"row-0",template_submit:t.template_submit,custom_template_edit_is_runing:t.template_edit_is_runing},on:{ev_builder_forms:t.ev_builder_forms_add}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"associate"==t.current_tab,expression:"current_tab == 'associate'"}]},[a("menus-buttons",{ref:"menu_buttons",attrs:{group_buttons:t.customdatas1},on:{ev_menu_button:t.ev_menu_button_associate}}),a("builder-forms",{ref:"builderformsselect",attrs:{forms:t.formated_forms_select,show_submit:!1,form_contain_class:"w-100 ",form_class:"row-0"},on:{ev_builder_forms:t.ev_builder_forms_select}}),a("tableau-gestion",{ref:"tableau_gestion2",attrs:{show_id:!0,show_action:!0,class_table:"mt-3 array-liste-datas articles",rows:t.articles_attach,headers:t.table_headers2,template_tableau_action:t.table_template_tableau_action2,template_tableau_index:t.template_tableau_index},on:{ev_action_ev_template_tableau_action:t.ev_action_ev_template_tableau_action2}}),a("gestion-blocs-edit",{attrs:{is_runing:t.template_ordering_is_runing,configs:{display_add_button:!1}},on:{ev_custom_submit:t.ev_custom_submit_parent}})],1)],1)},w=[],x=(a("caad"),a("b0c0"),a("b64b"),a("2532"),a("5530")),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-action"},[t.edit_button?a("span",{staticClass:"button ",on:{click:function(e){return t.edit_ligne("edit")}}},[a("i",{staticClass:"fas fa-edit click-pointer text-warning mr-4"})]):t._e(),a("span",{staticClass:"button",on:{click:function(e){return t.delete_data("delete")}}},[a("i",{staticClass:"far fa-trash-alt click-pointer text-danger"})])])},B=[],C={name:"TemplateTableauActionExterne",props:{ligne:{type:[String,Boolean,Object,Array]},index:{type:[String,Number]}},data:function(){return{edit_button:!0}},methods:{edit_ligne:function(t){this.send_action(t)},delete_data:function(t){this.send_action(t)},send_action:function(t){this.$emit("ev_template_tableau_action",{ligne:this.ligne,index:this.index,action:t})},displayEditBouton:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.edit_button=t}}},k=C,V=Object(p["a"])(k,j,B,!1,null,"70b08008",null),$=V.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_action"},[a("div",[a("hr"),a("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:t.save_data}},[t._v(" Enregistrer "),t.display_is_runing?a("i",{staticClass:"fas fa-sync fa-spin"}):t._e()]),t.configs.display_add_button?a("span",{staticClass:"btn btn-outline-success btn-sm float-right",on:{click:t.add_datas}},[t._v(" Ajouter un bloc ")]):t._e()])])},O=[],S={name:"GestionBlocsEdit",props:{datas:{type:[String,Boolean,Object,Array]},is_runing:{type:Boolean},configs:{type:Object,default:function(){return{display_add_button:!0}}}},computed:{display_is_runing:{get:function(){return void 0!==this.configs.is_runing?this.configs.is_runing:this.is_runing}}},methods:{save_data:function(){this.$emit("ev_custom_submit",{action:"save",submit:!0})},add_datas:function(){this.$emit("ev_custom_submit",{action:"add_datas"})},set_running:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$set(this.configs,"is_runing",t)},set_add_button:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$set(this.configs,"display_add_button",t)}}},G=S,N=Object(p["a"])(G,A,O,!1,null,null,null),M=N.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("modal-simple",{attrs:{id_modal:t.formated_id_modal,type_modal_bootstrap:!1,open_modal_custom:t.open_modal_custom,titre_modal_preview:t.titre_modal_preview,template_modal_body:t.template_modal_body,template_modal_footer:t.template_modal_footer,datas_modal_footer:t.datas_modal_footer,is_runing:t.template_edit_is_runing},on:{ev_modal_simple_footer:t.ev_modal_simple_footer,ev_modal_simple:t.ev_modal_simple}})],1)},E=[],T={name:"templateModalBody",template:'<div>\n  <strong class="d-block mb-4"> Etes vous certains de vouloir supprimer, cette action est irreverssible. </strong>\n  </div>'},D={name:"templateModalFooter",props:{modal_footer:{type:[Object]},is_runing:{type:Boolean}},template:'<div>\n  <div class="d-flex justify-content-end"><span class="btn btn-sm btn-outline-warning click-pointer mr-4" @click="close_modal"><i class="fas fa-undo-alt mr-2"></i> Annulée</span> <span class="btn btn-sm btn-outline-danger click-pointer" @click="confirm_delete"><i class="far fa-trash-alt mr-2"></i> Supprimer <i class="fas fa-sync fa-spin ml-2" v-if="is_runing"></i></span></div>\n  </div>',methods:{close_modal:function(){this.$emit("ev_modal_simple_footer",{status:!0,action:"close"})},confirm_delete:function(){this.$emit("ev_modal_simple_footer",{status:!0,action:"confirm_delete",row:this.modal_footer})}}},R={name:"GestionBlocsDelete",props:{row:{type:[String,Boolean,Object,Array]},template_edit_is_runing:{type:Boolean}},data:function(){return{template_modal_body:"",template_modal_footer:"",open_modal_custom:!1,datas_modal_footer:{}}},mounted:function(){this.template_modal_body=T,this.template_modal_footer=D},components:{"modal-simple":v},computed:{formated_id_modal:{get:function(){return"modal-del-"+this.row.index}},titre_modal_preview:{get:function(){return this.row.ligne&&this.row.ligne.value?(this.setDatafooter(),"Supprression de <b>"+this.row.ligne.value+"<b>"):"..."}}},methods:{confirm_delete:function(){this.$emit("ev_custom_submit",{action:"save",submit:!0})},add_datas:function(){this.$emit("ev_custom_submit",{action:"add_datas"})},open_modal:function(){this.open_modal_custom=!0},close_modal:function(){this.open_modal_custom=!1},ev_modal_simple_footer:function(t){"close"==t.action&&this.close_modal(),this.$emit("ev_template_edit",t)},ev_modal_simple:function(t){console.log("ev_modal_simple : ",t),"close"==t.action&&this.close_modal()},setDatafooter:function(){this.datas_modal_footer=this.row}}},q=R,P=Object(p["a"])(q,L,E,!1,null,null,null),I=P.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex text-center text-white mb-4",attrs:{first_item:t.first_item}},t._l(t.group_buttons,(function(e,i){return a("div",{key:i,class:{"w-100":t.v_100},attrs:{"data-index":i}},[a("span",{staticClass:" px-3 py-2 border click-pointer d-block",class:{"bg-secondary":t.current_onglet!==e.id,"bg-primary":t.current_onglet===e.id},domProps:{innerHTML:t._s(e.value)},on:{click:function(a){return t.select_curent_onglet(e.id,i)}}})])})),0)])},H=[],U={name:"MenusButtons",props:{group_buttons:Array,v_100:{type:Boolean,default:!1}},data:function(){return{current_onglet:"",select_first:!0,stop_after:!1}},computed:{first_item:{get:function(){return this.group_buttons.length&&this.select_first?(this.select_first_line(),0):""}}},methods:{select_curent_onglet:function(t,e){this.current_onglet=t,this.$emit("ev_menu_button",{status:!0,index:e,articles:this.group_buttons[e].articles?this.group_buttons[e].articles:[],id:this.group_buttons[e].id})},select_first_line:function(){var t=this.group_buttons[0],e=t.id,a=0;this.select_curent_onglet(e,a),this.stop_after&&(this.select_first=!1)}}},F=U,Y=Object(p["a"])(F,Q,H,!1,null,null,null),J=Y.exports,K={name:"TableEmptyCategorie",props:{datas:{type:[String,Boolean,Object,Array],default:"Vide"}},template:'<div v-html="datas" class="text-center"></div>'},z={neme:"templateTableauIndex",props:{datas_index:{type:[Number,String,Object]}},template:'\n   <div class="text-center">\n     <div>\n      {{datas_index}}\n     </div>\n     <span class="identifiant"><i class="fas fa-arrows-alt fa-2x text-warning"></i></span>\n   </div>\n   '},W={name:"GestionBlocs",props:{customdatas1:Array,customdatas3:Boolean,modal_body:[Array,Object]},data:function(){return{loading_blocs:!1,show_alert:!1,class_alert:"alert-danger",alert_message:"",id_admin_local:!1,alert_trigger_show:0,current_tab:"manage_block",loading_association:!1,display_bloc:"liste_bloc",row:{},table_empty_message:"Aucune categorie",table_show_title:!1,table_title:"",table_select_blog_is_running:!1,table_template_tableau_action:$,table_template_tableau_action2:Object(x["a"])({},$,{mounted:function(){this.edit_button=!1}}),table_datas_ligne_edit:{},table_template_edit:"",table_template_edit_is_runing:!1,template_tableau_index:"",table_headers2:{id:{name:"id",label:"Id",addclass_tr:{custom:"drap-drop-box"},addclass_td:{custom:"d-none"}},title:{name:"title",label:"Titre"}},template_submit:M,formated_forms_add:[{template:"input-text",input:{value:""},label:"Nom de la categorie",name:"categorie",put_empty:!0,rules:"required"}],template_ordering_is_runing:!1,Vue_templatesubmitEdit:{},Vue_templatesubmitAdd:{},Vue_tableau_gestion:{},Vue_menu_buttons:{},flux_articles:[],articles_attach:[],articles_select:[],current_categorie_index:null,current_categorie_id:null,current_categorie_articles:null}},mounted:function(){this.template_tableau_index=z,this.Vue_templatesubmitEdit=this.$refs.builderformsedit.$refs.templatesubmit,this.Vue_templatesubmitAdd=this.$refs.builderformsadd.$refs.templatesubmit,this.Vue_tableau_gestion=this.$refs.tableau_gestion,this.Vue_menu_buttons=this.$refs.menu_buttons},components:{"gestion-blocs-edit":M,"menus-buttons":J},computed:{table_headers:{get:function(){return this.modal_body&&this.modal_body.table_headers?this.modal_body.table_headers:{}}},template_edit_is_runing:{get:function(){return this.customdatas3}},table_template_footer:{get:function(){return!this.customdatas1.length&&this.table_headers&&Object.keys(this.table_headers).length?K:""}},table_datas_footer:{get:function(){return!this.customdatas1.length&&this.table_headers&&Object.keys(this.table_headers).length?" Aucune categorie disponible ":""}},formated_forms_edit:{get:function(){var t=[];if(t.push({template:"input-text",input:{value:this.row.index},name:"index",classe:"d-none"}),this.row.ligne){for(var e in this.row.ligne)this.table_headers[e].edit&&t.push({template:this.table_headers[e].edit.template,input:{value:this.row.ligne[e]?this.row.ligne[e]:""},name:this.table_headers[e].edit.name?this.table_headers[e].edit.name:e,classe:this.table_headers[e].edit.classe?this.table_headers[e].edit.classe+" "+e:e,options:this.table_headers[e].edit.options});return t}return[]}},formated_alert_trigger_show:{get:function(){return this.modal_body&&this.modal_body.alert&&this.modal_body.alert.alert_trigger_show&&this.modal_body.alert.alert_trigger_show>this.alert_trigger_show?("warning"===this.modal_body.alert.type&&this.ev_show_alert_warning(this.modal_body.alert.msg),this.set_alert_trigger_show(this.modal_body.alert.alert_trigger_show),this.modal_body.alert.alert_trigger_show):0}},formated_forms_select:{get:function(){return[{template:"input-select",input:{value:""},label:"Selectionner les articles",name:"article",options:this.articles_select,trigger:{submit:!0}}]}}},methods:{displayListsDatas:function(){this.display_bloc="liste_bloc",this.current_tab="manage_block"},select_curent_tabs:function(t){this.current_tab=t,"manage_block"==t&&(this.display_bloc="liste_bloc")},ev_action_ev_template_tableau_action:function(t){var e=this;if(this.table_datas_ligne_edit=t,"edit"==t.action)this.Vue_templatesubmitEdit.set_add_button(!1),this.display_bloc="form-edit",this.row=t,this.table_template_edit="";else if("delete"==t.action){this.table_template_edit=I;var a=function t(){e.Vue_tableau_gestion.$refs.cps_template_edit?e.Vue_tableau_gestion.$refs.cps_template_edit.open_modal():setTimeout((function(){console.log("waitting compenent load"),t()}),100)};a()}},ev_action_ev_template_tableau_action2:function(t){console.log("ev_action_ev_template_tableau_action2",t),this.$emit("ev_modal_simple",{remove_articles_in_categorie:t,current_categorie_index:this.current_categorie_index,current_categorie_id:this.current_categorie_id})},ev_template_edit:function(t){"confirm_delete"===t.action&&this.$emit("ev_modal_simple",t)},ev_custom_submit_parent:function(t){"add_datas"==t.action?(this.display_bloc="form-add",this.Vue_templatesubmitAdd.set_add_button(!1)):this.$emit("ev_modal_simple",{datas:t,action:"savemetafieldBlogCategory"})},ev_builder_forms:function(t){this.$emit("ev_modal_simple",{form:t})},ev_builder_forms_add:function(t){if(t.forms&&""!==t.forms.categorie)this.$emit("ev_modal_simple",{form_add:t});else{var e="Le champs est requis";this.ev_show_alert_warning(e)}},ev_builder_forms_select:function(t){console.log("ev_builder_forms_select",t),this.$emit("ev_modal_simple",{add_articles_in_categorie:t,current_categorie_index:this.current_categorie_index,current_categorie_id:this.current_categorie_id})},ev_show_alert:function(t){this.show_alert=!0,this.class_alert=t.classe,this.alert_message=t.title},ev_close_alert:function(){this.show_alert=!1,this.class_alert="",this.alert_message=""},alert_close_static:function(){this.ev_close_alert()},ev_show_alert_warning:function(t){var e={classe:"alert-warning",title:t};this.ev_show_alert(e)},show_alert__ajax_messages:function(t){var e={classe:"alert-"+t.type,title:t.msg};this.ev_show_alert(e)},set_alert_trigger_show:function(t){this.alert_trigger_show=t},close_modal_confirm:function(){this.$set(this.table_datas_ligne_edit,"action","close")},active__table_template_edit_is_runing:function(t){this.table_template_edit_is_runing=t},set_loading_blocs:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading_blocs=t},ev_menu_button_associate:function(t){this.current_categorie_index=t.index,this.current_categorie_id=t.id,this.current_categorie_articles=t.articles,this.get_list_articles_disponible(),this.getListArticlesSelectionner()},getListArticlesSelectionner:function(){var t=this;t.articles_attach=[];var e=this.current_categorie_articles;for(var a in e)for(var i in this.flux_articles)this.flux_articles[i].id===e[a]&&t.articles_attach.push({id:this.flux_articles[i].id,title:this.flux_articles[i].title})},getListArticlesUsed:function(){var t=this;return new Promise((function(e){var a=t.customdatas1,i=[];if(a.length)for(var s in a){if(a[s].articles&&a[s].articles.length)for(var o in a[s].articles)i.push(a[s].articles[o]);var l=s+1;a.length<=l&&e({status:!0,articles:i})}else e({status:!1,articles:i})}))},list_articles_disponible:function(t,e){return new Promise((function(a){var i={};if(t.length)for(var s in t){e.articles.includes(t[s].id)||(i[t[s].id]=t[s].title);var o=s+1;t.length<=o&&a({status:!0,options:i})}else a({status:!1,options:i})}))},get_list_articles_disponible:function(){console.log("get_list_articles_disponible");var t=this.flux_articles,e=this;Object(c["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getListArticlesUsed();case 2:return i=a.sent,a.next=5,e.list_articles_disponible(t,i);case 5:s=a.sent,e.articles_select=s.options,e.$emit("ev_modal_simple",{sortable:"article",current_categorie_index:e.current_categorie_index,current_categorie_id:e.current_categorie_id});case 8:case"end":return a.stop()}}),a)})))()},set_flux_articles:function(t){this.flux_articles=t,this.Vue_menu_buttons.stop_after=!0}}},X=W,Z=(a("0ccb"),Object(p["a"])(X,y,w,!1,null,null,null)),tt=Z.exports;window.jQuery?g=window.jQuery:window.$&&(g=window.$);var et={name:"GestionCats",props:{id_modal:{type:[String,Number]},blogs:{type:[Array]},parent_init:{type:Boolean,default:!1}},data:function(){return{databaseConfig:"",titre_modal:"",template_edit_running:!1,trigger_request:0,data_post:{},ajax_token:"",show_alert_msg:!1,ajax_messages:{msg:"",type:""},alert_trigger_show:0,actionparent:"",template_modal_body:"",blog:{},article:{},flux_articles:[],flux_blog_metafields:[],blog_category:[],datas__ev_modal_simple:{},modal_body:{},VueGestionBlocs:{},id_blog:"",blog_categories_articles:{}}},mounted:function(){this.databaseConfig=l["a"].databaseConfig,this.template_modal_body=tt},watch:{id_blog:function(t){this.open_modal(t)}},components:{"modal-simple":v,ajax:n["a"]},computed:{formated_id_modal:{get:function(){return"model-"+this.id_modal}}},methods:{set_blog_id:function(t){this.id_blog=t},open_modal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this;e.VueGestionBlocs=e.$refs.modal_simple,e.VueGestionBlocs.set_loading_blocs(!0),e.getBlog(t)},getBlog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=this.id_blog),this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig,id_blog:t},this.ajax_token="shopify_load_blogs_with_metafield",this.trigger_request++},getArticlesBlogs:function(t){this.table_select_blog_is_running=!0,this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig,id_blog:t},this.ajax_token="shopify_load_articles--category-article",this.trigger_request++},ev_ajax_success:function(t){var e=this;if(console.log("ev_ajax_success : ",t),t.return&&t.return.shopify_load_blog&&t.return.shopify_load_blog.blog){this.blog_category=[],e.VueGestionBlocs.articles_attach=[],e.VueGestionBlocs.articles_select=[],this.blog=t.return.shopify_load_blog.blog,this.flux_blog_metafields=this.blog.metafields,this.titre_modal="Blog : "+this.blog.title,e.VueGestionBlocs.set_loading_blocs(!1),e.buildDataForModal();var a=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMetafieldByKey("blog_categories");case 2:a=t.sent,e.table_select_blog_is_running=!1,a.value&&(i=JSON.parse(a.value),e.blog_category=i,e.add_sortable());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();a(),this.getArticlesBlogs(this.blog.id)}else t.return&&t.return.save_metafields?t.configs.provider&&("add_categorie"==t.configs.provider?(e.VueGestionBlocs.Vue_templatesubmitAdd.set_running(!1),e.VueGestionBlocs.displayListsDatas()):"edit_categorie"==t.configs.provider?(this.template_edit_running=!1,e.VueGestionBlocs.displayListsDatas()):"confirm_delete"==t.configs.provider?(e.VueGestionBlocs.active__table_template_edit_is_runing(!1),e.VueGestionBlocs.Vue_tableau_gestion.$refs.cps_template_edit.close_modal()):"ordering"==t.configs.provider&&(e.VueGestionBlocs.template_ordering_is_runing=!1)):t.return&&t.return.shopify_load_articles&&t.return.shopify_load_articles.articles&&(this.flux_articles=t.return.shopify_load_articles.articles,e.VueGestionBlocs.set_flux_articles(this.flux_articles))},ev_ajax_error:function(){var t=this;t.VueGestionBlocs.Vue_templatesubmitAdd.set_running(!1),this.template_edit_running=!1,t.VueGestionBlocs.active__table_template_edit_is_runing(!1),t.VueGestionBlocs.template_ordering_is_runing=!1},getMetafieldByKey:function(t){var e=this;return new Promise((function(a){if(e.flux_blog_metafields.length)for(var i in e.flux_blog_metafields)if(e.flux_blog_metafields[i].key===t)a(e.flux_blog_metafields[i]);else{var s=i+1;e.flux_blog_metafields.length<=s&&a(!1)}else a(!1)}))},buildDataForModal:function(){this.modal_body={table_headers:{value:{name:"value",label:"Valeur",edit:{template:"input-text"},addclass_tr:{custom:"drap-drop-box"}},id:{name:"id",label:"#id",edit:{template:"input-text",classe:"d-none"},addclass_td:{custom:"d-none"}}},alert:{}}},ev_modal_simple:function(t){console.log("ev_modal_simple : ",t);var e=this;if(this.datas__ev_modal_simple=t,t.form){var a=t.form;if(a.forms&&a.params)if(this.table_template_edit_is_runing=!0,this.template_edit_running=!0,"save"==a.params.action){if(this.blog_category[a.forms.index]){var i=this.blog_category[a.forms.index];i.value&&(i.value=a.forms.value,a.forms.id&&(i.id=a.forms.id)),this.blog_category[a.forms.index]=i,this.saveMetafieldblogCategory("edit_categorie")}}else"delete"==a.params.action&&console.log("delete")}else if("confirm_delete"===t.action)t.row&&t.row.action&&"delete"===t.row.action&&Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.ValidBeforeDelete(t.row.index);case 2:i=a.sent,i.status?(e.blog_category.splice(t.row.index,1),e.VueGestionBlocs.active__table_template_edit_is_runing(!0),e.saveMetafieldblogCategory("confirm_delete")):(e.VueGestionBlocs.ev_show_alert_warning(i.msg),e.VueGestionBlocs.close_modal_confirm());case 4:case"end":return a.stop()}}),a)})))();else if("savemetafieldBlogCategory"===t.action)e.VueGestionBlocs.template_ordering_is_runing=!0,e.saveMetafieldblogCategory("ordering");else if(t.form_add){var s=function(){(function(){e.form_add_cat_is_running=!0;var a=1;e.blog_category.length&&(a=e.blog_category.slice(-1)[0],a.id&&(a=a.id+1));var i={id:a,value:t.form_add.forms.categorie,articles:[]};e.blog_category.push(i),e.VueGestionBlocs.Vue_templatesubmitAdd.set_running(!0),e.saveMetafieldblogCategory("add_categorie")})()},o=function(){Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.validationTerm(t.form_add.forms.categorie),i.then((function(t){console.log("validation :",t),t.status?s():e.VueGestionBlocs.ev_show_alert_warning(t.msg)}));case 2:case"end":return a.stop()}}),a)})))()};o()}else t.add_articles_in_categorie?function(){var a=parseInt(t.add_articles_in_categorie.article),i=t.current_categorie_index;if(e.blog_category[i]){var s=e.blog_category[i];s.articles||(s.articles=[]),s.articles.push(a),e.blog_category[i]=s,e.VueGestionBlocs.get_list_articles_disponible(),e.VueGestionBlocs.getListArticlesSelectionner()}else e.VueGestionBlocs.ev_show_alert_warning("Error ...")}():t.remove_articles_in_categorie?function(){var a=parseInt(t.remove_articles_in_categorie.ligne.id),i=t.current_categorie_index;if(e.blog_category[i]){var s=e.blog_category[i].articles.indexOf(a);e.blog_category[i].articles.splice(s,1),e.VueGestionBlocs.get_list_articles_disponible(),e.VueGestionBlocs.getListArticlesSelectionner()}else e.VueGestionBlocs.ev_show_alert_warning("Error ...")}():"article"===t.sortable&&e.add_sortable_articles(t)},ValidBeforeDelete:function(t){var e=this;return new Promise((function(a){Object(c["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.categorieIsUse(t);case 2:s=i.sent,s.status?a({status:!0}):a(s);case 4:case"end":return i.stop()}}),i)})))()}))},categorieIsUse:function(t){var e=this;return new Promise((function(a){e.blog_category[t]&&e.blog_category[t].articles.length?a({status:!1,msg:"Cette categorie est deja associée à des articles"}):a({status:!0})}))},validationTerm:function(t){var e=this;return new Promise((function(a){Object(c["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.checkDoublonTerm(t);case 2:s=i.sent,s.status||a({status:!1,msg:s.msg}),a({status:!0,msg:""});case 5:case"end":return i.stop()}}),i)})))()}))},checkDoublonTerm:function(t){var e=this;return new Promise((function(a,i){if(e.blog_category.length)for(var s in e.blog_category){e.blog_category[s].value===t&&a({status:!1,msg:"Le terme existe déjà"});var o=parseInt(s)+1;e.blog_category.length<=o&&a({status:!0,msg:""})}else a({status:!0,msg:""});i()}))},saveMetafieldblogCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data_post={databaseConfig:this.databaseConfig,metafields:{key:"blog_categories",value:this.blog_category,type:"blog",id_entity:this.blog.id,type_metafield:"json_string"},provider:t},this.ajax_token="save_metafields",this.trigger_request++,this.BuildDatas__blog_categories_articles(this.blog_category)},BuildDatas__blog_categories_articles:function(t){var e=this;for(var a in console.log("blog_category : ",t),console.log("tous les articles : ",this.flux_articles),console.log("Le blog en cours : ",this.blog),this.blog_categories_articles={},t){var i=t[a].articles;for(var s in i)console.log("article : ",i[s]),this.blog_categories_articles[i[s]]=this.getArticle(i[s])}setTimeout((function(){console.log("this.blog_categories_articles : ",e.blog_categories_articles),e.saveMetafieldblog__blog_categories_articles()}),400)},saveMetafieldblog__blog_categories_articles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data_post={databaseConfig:this.databaseConfig,metafields:{key:"blog_categories_articles",value:this.blog_categories_articles,type:"blog",id_entity:this.blog.id,type_metafield:"json_string"},provider:t},this.ajax_token="save_metafields",this.trigger_request++},getArticle:function(t){var e={};for(var a in this.flux_articles)if(t==this.flux_articles[a].id){e={url:this.blog.handle+"/"+this.flux_articles[a].handle,handle:this.flux_articles[a].handle,handle_blog:this.blog.handle};break}return e},add_sortable:function(){var t,e,a=this;g(".array-liste-datas.categories tbody").sortable({axis:"y",cursor:"move",handle:".identifiant",start:function(e,a){e&&(t=g(a.item[0]).index())},stop:function(i,s){i&&(e=s.item[0].sectionRowIndex,g(".array-liste-datas.categories tbody").sortable("cancel"),a.array_move(a.blog_category,t,e))}})},add_sortable_articles:function(t){var e,a,i=this,s=t.current_categorie_index;g(".array-liste-datas.articles tbody").sortable({axis:"y",cursor:"move",handle:".identifiant",start:function(t,a){t&&(e=g(a.item[0]).index())},stop:function(t,o){t&&(a=o.item[0].sectionRowIndex,g(".array-liste-datas.articles tbody").sortable("cancel"),i.array_move(i.blog_category[s].articles,e,a),console.log("\n old_index",e,"\n new_index",a),console.log("self.blog_category",i.blog_category[s].articles),i.VueGestionBlocs.getListArticlesSelectionner())}})},array_move:function(t,e,a){while(e<0)e+=t.length;while(a<0)a+=t.length;if(a>=t.length){var i=a-t.length+1;while(i--)t.push(void 0)}t.splice(a,0,t.splice(e,1)[0])}}},at=et,it=Object(p["a"])(at,_,d,!1,null,null,null),st=it.exports;if(window.jQuery)var ot=window.jQuery;if(window.moment)var lt=window.moment;var nt={name:"PageBlog",data:function(){return{trigger_request:0,data_post:{},ajax_token:"",show_alert_msg:!1,ajax_messages:{msg:"",type:""},table_id:"table-datas-blogs",metafields:[],blogs:[],blogs_select:[],datatable:{},id_modal:"action-blog",modal_title:"",modal_action:"",template_modalbody:"",modal_loading:!1,form_running:!1,blog_select:{},id_blog:"",VueGestionBlocs:{}}},components:{ajax:n["a"],"modal-slot":r["default"]},mounted:function(){this.databaseConfig=l["a"].databaseConfig,this.getBlocs()},methods:{getBlocs:function(){this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig},this.ajax_token="shopify_load_blogs",this.trigger_request++},ev_ajax_success:function(t){switch(console.log("ev_ajax_success : ",t),t.token){case"shopify_load_blogs":this.blogs=t.return.shopify_load_blog.blogs,this.buildTable();break}},ev_ajax_error:function(){},buildTable:function(){var t=this;this.datatable.rows&&(this.datatable.destroy(),ot("#"+this.table_id).empty()),this.datatable=ot("#"+this.table_id).DataTable({data:this.blogs,order:[[0,"desc"]],columns:[{data:"id",title:"# ID "},{data:"title",title:"Titre"},{data:"created_at",title:"Date de creation",render:function(t){return lt(t).format("DD/MM/YYYY à HH:mm")},className:"created-at"},{className:"details-control",orderable:!1,data:null,title:"Action",defaultContent:'<select class=" form-control select-action">\n                  <option value="" selected> Aucun(e)</option>\n                  <option value="gestion_cat_virtuelv2">Gestions des categories</option>\n                </select>'}],language:{url:"//cdn.datatables.net/plug-ins/1.10.21/i18n/French.json"}});var e=this.datatable;ot("#"+this.table_id).addClass("light-table table"),ot("#"+this.table_id+" thead").addClass("thead-light table-header"),ot("#"+this.table_id+" tbody").on("click","tr .select-action",(function(){var a=ot(this).val(),i=ot(this).parent().parent();""!==a&&(t.blog_select=e.row(i).data(),t.open_modal(t.blog_select,a))}))},open_modal:function(t,e){var a=this;switch(a.modal_title=t.title,a.modal_action=e,this.modal_action){case"gestion_cat_virtuel":break;default:a.select_template(),ot("#"+a.formated_id_modal).modal("show"),ot("#"+a.formated_id_modal).on("shown.bs.modal",(function(){ot("#"+a.formated_id_modal).off("shown.bs.modal")}));break}},close_modal:function(){var t=this;ot("#"+t.formated_id_modal).modal("hide")},ev_index:function(t){switch(t.action){case"save_metafield":this.form_running=!0,this.saveMetaField(t.type,t.key,t.type_metafield,t.id_entity,t.value,t.id_parent);break;case"update_select_blog":this.blogs_select=t.blogs_select;break}},select_template:function(){switch(this.modal_action){case"gestion_cat_virtuelv2":this.template_modalbody=st;break;default:this.template_modalbody="";break}this.applyConfigsComponent()},applyConfigsComponent:function(){var t=this;setTimeout((function(){switch(t.composant=t.$refs.composant,t.modal_action){case"gestion_cat_virtuelv2":t.composant.set_blog_id(t.blog_select.id);break}}),150)}},computed:{formated_id_modal:{get:function(){return"model-style-"+this.id_modal}}}},rt=nt,_t=Object(p["a"])(rt,s,o,!1,null,null,null);e["default"]=_t.exports},9430:function(t,e,a){},b2ed:function(t,e,a){},c6de:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:[t.type_modal_bootstrap?"modal fade":"modal-custom "+t.formated_open_modal_custom],attrs:{id:t.id_modal,role:"dialog","aria-labelledby":t.id_modal+"Label","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",class:t.modal_position,attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("modal_header",[t._v(" Titre modal ")],{id:t.id_modal+"Label"}),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.close_and_false}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])],2),a("div",{staticClass:"modal-body"},[t._t("default",null,{id:t.id_modal+"Label",doaction:t.actionparent,is_runing:t.is_runing})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_footer,expression:"show_footer"}],staticClass:"modal-footer "},[t._t("modal_footer",null,{doaction:t.actionparent,is_runing:t.is_runing})],2)])])])])},o=[];a("a9e3");window.jQuery?i=window.jQuery:window.$&&(i=window.$);var l={name:"ModalSimple",props:{datas_modal_body:[Object,Array,String,Number],id_modal:{type:String,default:"myModal"},type_modal_bootstrap:{type:Boolean,default:!0},modal_position:{type:String,default:"modal-dialog-centered"},open_modal_custom:{type:Boolean,default:!1},show_footer:{type:Boolean,default:!0},actionparent:[Object,Array,String,Number],is_runing:{type:[Boolean],default:!1}},data:function(){return{modal_custom_class:""}},computed:{titre_modal:{get:function(){return decodeURIComponent(this.titre_modal_preview)}},formated_open_modal_custom:{get:function(){return this.open_modal_custom?"show-custom-modal":""}}},methods:{ev_modal_simple:function(t){this.$emit("ev_modal_simple",t)},ev_modal_simple_footer:function(t){this.$emit("ev_modal_simple_footer",t)},close_and_false:function(){this.type_modal_bootstrap?i("#"+this.id_modal).modal("hide"):this.$emit("ev_modal_simple",{action:"close"})},close_modal_confirm:function(){alert("")}}},n=l,r=(a("712d"),a("2877")),_=Object(r["a"])(n,s,o,!1,null,"014b11f9",null);e["default"]=_.exports}}]);
//# sourceMappingURL=NutribeShopify.umd.min.4.js.map