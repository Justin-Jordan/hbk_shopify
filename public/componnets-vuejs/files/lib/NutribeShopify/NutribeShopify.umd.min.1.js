(("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]=("undefined"!==typeof self?self:this)["webpackJsonpNutribeShopify"]||[]).push([[1,6],{1276:function(e,t,i){"use strict";var a=i("d784"),l=i("44e7"),s=i("825a"),n=i("1d80"),o=i("4840"),r=i("8aa5"),c=i("50c4"),d=i("14c3"),u=i("9263"),_=i("d039"),f=[].push,h=Math.min,m=4294967295,p=!_((function(){return!RegExp(m,"y")}));a("split",2,(function(e,t,i){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var a=String(n(this)),s=void 0===i?m:i>>>0;if(0===s)return[];if(void 0===e)return[a];if(!l(e))return t.call(a,e,s);var o,r,c,d=[],_=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,p=new RegExp(e.source,_+"g");while(o=u.call(p,a)){if(r=p.lastIndex,r>h&&(d.push(a.slice(h,o.index)),o.length>1&&o.index<a.length&&f.apply(d,o.slice(1)),c=o[0].length,h=r,d.length>=s))break;p.lastIndex===o.index&&p.lastIndex++}return h===a.length?!c&&p.test("")||d.push(""):d.push(a.slice(h)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var l=n(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,l,i):a.call(String(l),t,i)},function(e,l){var n=i(a,e,this,l,a!==t);if(n.done)return n.value;var u=s(e),_=String(this),f=o(u,RegExp),g=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),b=new f(p?u:"^(?:"+u.source+")",v),y=void 0===l?m:l>>>0;if(0===y)return[];if(0===_.length)return null===d(b,_)?[_]:[];var x=0,w=0,k=[];while(w<_.length){b.lastIndex=p?w:0;var C,E=d(b,p?_:_.slice(w));if(null===E||(C=h(c(b.lastIndex+(p?0:w)),_.length))===x)w=r(_,w,g);else{if(k.push(_.slice(x,w)),k.length===y)return k;for(var j=1;j<=E.length-1;j++)if(k.push(E[j]),k.length===y)return k;w=x=C}}return k.push(_.slice(x)),k}]}),!p)},"14c3":function(e,t,i){var a=i("c6b6"),l=i("9263");e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var s=i.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return l.call(e,t)}},2532:function(e,t,i){"use strict";var a=i("23e7"),l=i("5a34"),s=i("1d80"),n=i("ab13");a({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(s(this)).indexOf(l(e),arguments.length>1?arguments[1]:void 0)}})},3452:function(e,t,i){"use strict";i.r(t);var a,l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ajax",{attrs:{numbre_request:e.trigger_request,data:e.data_post,token:e.ajax_token,debug:!1,show_alert_msg:e.show_alert_msg,messages:e.ajax_messages},on:{ev_ajax_success:e.ev_ajax_success,ev_ajax_error:e.ev_ajax_error}}),i("h4",[e._v("Blogs")]),i("div",{staticClass:"lists-checkbox d-flex flex-wrap mt-3 space-bottom-xl"},e._l(e.blogs,(function(t,a){return i("div",{key:a,staticClass:"custom-control custom-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.blogs_select,expression:"blogs_select"}],staticClass:"custom-control-input",class:"bg-"+t.handle,attrs:{type:"checkbox",id:"cus585Check"+a},domProps:{value:t.id,checked:Array.isArray(e.blogs_select)?e._i(e.blogs_select,t.id)>-1:e.blogs_select},on:{change:function(i){var a=e.blogs_select,l=i.target,s=!!l.checked;if(Array.isArray(a)){var n=t.id,o=e._i(a,n);l.checked?o<0&&(e.blogs_select=a.concat([n])):o>-1&&(e.blogs_select=a.slice(0,o).concat(a.slice(o+1)))}else e.blogs_select=s}}}),i("label",{staticClass:"custom-control-label",class:"bg-"+t.handle,attrs:{for:"cus585Check"+a},domProps:{innerHTML:e._s(t.title)},on:{click:function(i){return e.select_remove_blog(t.id)}}})])})),0),e.table_loading?i("div",{staticClass:"d-flex justify-content-center p-5 "},[e._m(0)]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.table_loading,expression:"!table_loading"}]},[i("table",{attrs:{id:e.table_id}})]),i("modal-slot",{attrs:{id_modal:e.formated_id_modal,show_footer:!0,modal_position:""},scopedSlots:e._u([{key:"modal_header",fn:function(){return[i("h5",{staticClass:"modal-title",domProps:{innerHTML:e._s(e.modal_title)}})]},proxy:!0}])},[e.modal_loading?i("div",{staticClass:"d-flex justify-content-center p-5"},[i("h2",[i("i",{staticClass:"fas fa-sync fa-spin text-warning"})])]):e._e(),i(e.template_modalbody,{directives:[{name:"show",rawName:"v-show",value:!e.modal_loading,expression:"!modal_loading"}],ref:"composant",tag:"component",attrs:{article:e.article_select,articles:e.articles,blog:e.getBlog(e.article_select["blog_id"]),blogs:e.blogs,metafields:e.metafields,form_running:e.form_running},on:{ev_index:e.ev_index}})],1)],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h2",[i("i",{staticClass:"fas fa-sync fa-spin text-warning"})])}],n=i("6f2e"),o=i("cc84"),r=i("c6de"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{attrs:{id:e.id_html}},e._l(e.blocks,(function(t,a){return i("div",{key:a,staticClass:"drap-drop-box"},[i("div",{staticClass:"d-flex justify-content-center align-items-center"},[i("div",{staticClass:"identifiant text-center py-2"},[e._v(" "+e._s(a+1)+" "),i("i",{staticClass:"fas fa-arrows-alt fa-2x text-warning"})]),i("div",{staticClass:"w-100"},[i("div",{staticClass:"form-group"},[i("label",[e._v("Libellé")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.art_ref_titre,expression:"block.art_ref_titre"}],staticClass:" form-control",attrs:{type:"text"},domProps:{value:t.art_ref_titre},on:{input:function(i){i.target.composing||e.$set(t,"art_ref_titre",i.target.value)}}})]),i("div",{staticClass:"form-group"},[i("label",[e._v("Url")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.art_ref_description,expression:"block.art_ref_description"}],staticClass:" form-control",attrs:{type:"text"},domProps:{value:t.art_ref_description},on:{input:function(i){i.target.composing||e.$set(t,"art_ref_description",i.target.value)}}})]),i("span",{staticClass:"btn btn-outline-danger btn-sm remove-block",on:{click:function(t){return e.remove_block(a)}}},[i("i",{staticClass:"fas fa-trash-alt"})])])])])})),0),i("div",[e.show_save?i("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.save_reference}},[e._v(" Enregistrer "),e.form_running?i("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]):e._e(),e.show_add?i("span",{staticClass:"btn btn-outline-success btn-sm float-right ",on:{click:e.add_new_block}},[e._v(" Ajouter un bloc ")]):e._e()])])},d=[];i("a434");function u(e){return{id:e,art_ref_titre:"",art_ref_description:""}}window.jQuery?a=window.jQuery:window.$&&(a=window.$);var _,f={name:"ReferenceBlock",props:{article:{type:Object},metafields:{type:[Array,Object]},form_running:{type:Boolean},id_html:{type:String,default:"blocks-reference"}},data:function(){return{blocks:[],show_add:!0,show_save:!0,metafield_name:"ref_blocks"}},mounted:function(){this.PrepareBuildBloc()},methods:{PrepareBuildBloc:function(){this.article.id?this.buildBloc():alert("Error: le type d'entitté n'est pas pris en compte ")},buildBloc:function(){this.blocks=[];var e=this.metafields.length;if(e)for(var t in this.metafields){var i=this.metafields[t];if(i.key===this.metafield_name){var a=JSON.parse(i.value);if("json_string"===i.value_type)this.blocks=a;else if(a instanceof Array)this.blocks=this.deCodeData(a);else for(var l in a)this.blocks.push(this.deCodeData(a[l]))}var s=parseInt(t)+1;e===s&&(this.blocks.length||this.blocks.push(u(this.article.id)),this.add_sortable())}else this.blocks.push(u(this.article.id))},deCodeData:function(e){for(var t in e)e[t]=decodeURIComponent(e[t]);return e},enCodeData:function(e){for(var t in e)e[t]=encodeURIComponent(e[t]);return e},save_reference:function(){this.$emit("ev_index",{action:"save_metafield",key:this.metafield_name,value:this.blocks,type_metafield:"json_string",type:"article",id_entity:this.article.id,id_parent:this.article.blog_id})},add_new_block:function(){this.blocks.push({id:this.article.id,art_ref_titre:"",art_ref_description:""})},remove_block:function(e){this.blocks.splice(e,1)},add_sortable:function(){var e,t,i=this;a("#"+this.id_html).sortable({axis:"y",cursor:"move",handle:".identifiant",placeholder:"ui-state-highlight",start:function(t,i){t&&(console.log("height : ",a(i.item[0]).height()),a(" .ui-state-highlight").height(a(i.item[0]).height()),e=a(i.item[0]).index())},stop:function(l,s){l&&(t=a(s.item[0]).index(),a("#"+i.id_html).sortable("cancel"),i.array_move(i.blocks,e,t))}})},array_move:function(e,t,i){while(t<0)t+=e.length;while(i<0)i+=e.length;if(i>=e.length){var a=i-e.length+1;while(a--)e.push(void 0)}e.splice(i,0,e.splice(t,1)[0])}},computed:{},watch:{article:{handler:function(){},deep:!0},metafields:{handler:function(){this.PrepareBuildBloc()},deep:!0}}},h=f,m=i("2877"),p=Object(m["a"])(h,c,d,!1,null,null,null),g=p.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"tab"},[i("div",{staticClass:"w-100"},[i("label",[e._v("Type")]),i("div",{staticClass:"lists-checkbox d-flex flex-wrap mt-2 mb-4"},e._l(e.blog_categories,(function(t,a){return i("div",{key:a,staticClass:"custom-control custom-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.blog_type,expression:"blog_type"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"blog-"+e.camelToUnderscore(t.value)},domProps:{value:t.id,checked:Array.isArray(e.blog_type)?e._i(e.blog_type,t.id)>-1:e.blog_type},on:{change:function(i){var a=e.blog_type,l=i.target,s=!!l.checked;if(Array.isArray(a)){var n=t.id,o=e._i(a,n);l.checked?o<0&&(e.blog_type=a.concat([n])):o>-1&&(e.blog_type=a.slice(0,o).concat(a.slice(o+1)))}else e.blog_type=s}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"blog-"+e.camelToUnderscore(t.value)},domProps:{innerHTML:e._s(t.value)}})])})),0)]),i("div",[e.show_save?i("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.save_reference}},[e._v(" Enregistrer "),e.form_running?i("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]):e._e()])])])},b=[],y=(i("caad"),i("a15b"),i("ac1f"),i("2532"),i("5319"),i("1276"),{name:"TypeLivre",props:{article:{type:Object},metafields:{type:[Array,Object]},form_running:{type:Boolean},id_html:{type:String,default:"type-livre"},blog:[Object,Array]},data:function(){return{blog_type:[],show_save:!0,metafield_name:"type_livre",metafield_name_blog:"blog_categories",blog_categories:[],blog_categories_ids:[],current_tab:"",metafields_blog:[]}},watch:{metafields:{handler:function(){this.PrepareBuildBloc()},deep:!0}},methods:{PrepareBuildBloc:function(){this.article.id?(this.buildBloc(),this.metafields_blog=this.blog.metafields,this.buildCategorie()):alert("Error: le type d'entitté n'est pas pris en compte ")},buildBloc:function(){var e;this.blog_type=[];var t=this.metafields.length;if(t)for(var i in this.metafields){var a=this.metafields[i];a.key===this.metafield_name&&(e=JSON.parse(a.value),console.log("block type, ",e),this.blog_type=e)}},cleanValue:function(){for(var e in this.blog_type)this.blog_categories_ids.includes(this.blog_type[e])||this.blog_type.splice(e,1)},buildCategorie:function(){var e;for(var t in this.metafields_blog){var i=this.metafields_blog[t];if(i.key===this.metafield_name_blog&&(e=JSON.parse(i.value),e)){for(var a in this.blog_categories=e,this.blog_categories_ids=[],e)this.blog_categories_ids.push(e[a].id);this.cleanValue()}}},save_reference:function(){this.$emit("ev_index",{action:"save_metafield",key:this.metafield_name,value:this.blog_type,type_metafield:"json_string",type:"article",id_entity:this.article.id,id_parent:this.article.blog_id})},camelToUnderscore:function(e){var t=e.replace(/([A-Z])/g," $1");return t.split(" ").join("-").toLowerCase()}}}),x=y,w=Object(m["a"])(x,v,b,!1,null,null,null),k=w.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"form-group"},[i("label",[e._v(" Selectionner l'article ")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_article,expression:"filter_article"}],staticClass:" form-control",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.filter_article=t.target.multiple?i:i[0]}}},e._l(e.formetad_select_articles,(function(t,a){return i("option",{key:a,domProps:{value:a,innerHTML:e._s(t.title)}})})),0)]),i("div",{staticClass:"lists-checkbox d-flex flex-wrap my-3"},e._l(e.blogs,(function(t,a){return i("div",{key:a,staticClass:"custom-control custom-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.blogs_select,expression:"blogs_select"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"cus475Check"+a},domProps:{value:t.id,checked:Array.isArray(e.blogs_select)?e._i(e.blogs_select,t.id)>-1:e.blogs_select},on:{change:function(i){var a=e.blogs_select,l=i.target,s=!!l.checked;if(Array.isArray(a)){var n=t.id,o=e._i(a,n);l.checked?o<0&&(e.blogs_select=a.concat([n])):o>-1&&(e.blogs_select=a.slice(0,o).concat(a.slice(o+1)))}else e.blogs_select=s}}}),i("label",{staticClass:"custom-control-label",attrs:{for:"cus475Check"+a},domProps:{innerHTML:e._s(t.title)}})])})),0),i("div",{attrs:{id:e.id_html}},e._l(e.articles_lier,(function(t,a){return i("div",{key:a,staticClass:"drap-drop-box"},[i("div",{staticClass:"d-flex justify-content-center align-items-center"},[i("div",{staticClass:"identifiant text-center py-2"},[e._v(" "+e._s(a+1)+" "),i("i",{staticClass:"fas fa-arrows-alt fa-2x text-warning"})]),i("div",{staticClass:"w-100"},[i("div",{staticClass:"form-group"},[i("a",{attrs:{href:"https://nutribe.fr/"+t.blog_handle+"/"+t.handle_article,target:"_blanck"},domProps:{innerHTML:e._s(t.title)}})]),i("span",{staticClass:"btn btn-outline-danger btn-sm remove-block",on:{click:function(t){return e.remove_block(a)}}},[i("i",{staticClass:"fas fa-trash-alt"})])])])])})),0),i("div",[e.show_save?i("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.save_reference}},[e._v(" Enregistrer "),e.form_running?i("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]):e._e()]),i("pre",{staticClass:"d-none"},[e._v("    "+e._s(e.articles_lier)+"\n  ")])])},E=[];window.jQuery?_=window.jQuery:window.$&&(_=window.$);var j={name:"TypeLivre",props:{article:{type:Object},metafields:{type:[Array,Object]},form_running:{type:Boolean},id_html:{type:String,default:"articles-lier"},articles:{type:Array},blogs:{type:Array}},data:function(){return{articles_lier:[],show_save:!0,metafield_name:"articles_lier",filter_article:"",blogs_select:[],articles_lier_index:[]}},computed:{formetad_select_articles:{get:function(){return this.buildSelectList()}}},watch:{blogs_select:{handler:function(e){this.$emit("ev_index",{action:"update_select_blog",blogs_select:e})},deep:!0},metafields:{handler:function(){this.PrepareBuildBloc()},deep:!0},filter_article:function(e){""!==e&&this.add_article(this.formetad_select_articles[e])}},methods:{remove_block:function(e){if(this.articles_lier[e])for(var t in this.articles_lier_index)if(this.articles_lier_index[t]===this.articles_lier[e].id){this.articles_lier.splice(e,1),this.articles_lier_index.splice(t,1);break}},PrepareBuildBloc:function(){this.article.id?this.buildBloc():alert("Error: le type d'entitté n'est pas pris en compte ")},buildBloc:function(){this.articles_lier=[],this.articles_lier_index=[];var e=this.metafields.length;if(e)for(var t in this.metafields){var i=this.metafields[t];if(i.key===this.metafield_name){var a=JSON.parse(i.value);for(var l in this.articles_lier=a,a)this.articles_lier_index.push(a[l].id);break}}},save_reference:function(){this.$emit("ev_index",{action:"save_metafield",key:this.metafield_name,value:this.articles_lier,type_metafield:"json_string",type:"article",id_entity:this.article.id,id_parent:this.article.blog_id})},set_value:function(e){this.blogs_select=e},buildSelectList:function(){var e=[];for(var t in this.articles){var i=this.articles[t];this.articles_lier_index.includes(i.id)||e.push(i)}return e},add_article:function(e){var t=this,i=function(e,i){t.articles_lier.push({id:i.id,handle_article:i.handle,blog_handle:e,title:i.title}),t.articles_lier_index.push(i.id)};for(var a in this.blogs)if(e.blog_id==this.blogs[a].id){i(this.blogs[a].handle,e),this.add_sortable();break}this.filter_article=""},add_sortable:function(){var e,t,i=this;_("#"+this.id_html).sortable({axis:"y",cursor:"move",handle:".identifiant",placeholder:"ui-state-highlight",start:function(t,i){t&&(console.log("height : ",_(i.item[0]).height()),_(" .ui-state-highlight").height(_(i.item[0]).height()),e=_(i.item[0]).index())},stop:function(a,l){a&&(t=_(l.item[0]).index(),_("#"+i.id_html).sortable("cancel"),i.array_move(i.articles_lier,e,t))}})},array_move:function(e,t,i){while(t<0)t+=e.length;while(i<0)i+=e.length;if(i>=e.length){var a=i-e.length+1;while(a--)e.push(void 0)}e.splice(i,0,e.splice(t,1)[0])}}},A=j,S=Object(m["a"])(A,C,E,!1,null,null,null),B=S.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"blog-position_image"}},[e._v("Position image")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.position_image,expression:"position_image"}],staticClass:" form-control",attrs:{id:"blog-position_image"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.position_image=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"bottom"}},[e._v("Bottom")]),i("option",{attrs:{value:"center"}},[e._v("Center")]),i("option",{attrs:{value:"top"}},[e._v("Top")])])]),i("div",[e.show_save?i("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.save_reference}},[e._v(" Enregistrer "),e.form_running?i("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]):e._e()])])},P=[],O={name:"PositionImage",props:{article:{type:Object},metafields:{type:[Array,Object]},form_running:{type:Boolean},id_html:{type:String,default:"articles-lier"},articles:{type:Array},blogs:{type:Array}},data:function(){return{show_save:!0,position_image:"bottom",metafield_name:"position_image"}},watch:{metafields:{handler:function(){this.PrepareBuildBloc()},deep:!0}},methods:{remove_block:function(e){this.blocks.splice(e,1)},PrepareBuildBloc:function(){this.article.id?this.buildBloc():alert("Error: le type d'entitté n'est pas pris en compte ")},buildBloc:function(){this.position_image="";var e=this.metafields.length;if(e)for(var t in this.metafields){var i=this.metafields[t];i.key===this.metafield_name&&(this.position_image=i.value)}},save_reference:function(){this.$emit("ev_index",{action:"save_metafield",key:this.metafield_name,value:this.position_image,type_metafield:"string",type:"article",id_entity:this.article.id,id_parent:this.article.blog_id})}}},T=O,I=Object(m["a"])(T,$,P,!1,null,null,null),R=I.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"article_video"}},[e._v("Contenu (video)")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.article_video,expression:"article_video"}],staticClass:"form-control",attrs:{id:"article_video",rows:"12"},domProps:{value:e.article_video},on:{input:function(t){t.target.composing||(e.article_video=t.target.value)}}})]),i("div",[e.show_save?i("span",{staticClass:"btn btn-outline-success btn-sm",on:{click:e.save_reference}},[e._v(" Enregistrer "),e.form_running?i("i",{staticClass:"fas fa-sync fa-spin "}):e._e()]):e._e()])])},M=[],L={name:"ArticleVideo",props:{article:{type:Object},metafields:{type:[Array,Object]},form_running:{type:Boolean},id_html:{type:String,default:"articles-lier"},articles:{type:Array},blogs:{type:Array}},data:function(){return{show_save:!0,article_video:"",metafield_name:"article_video"}},watch:{metafields:{handler:function(){this.PrepareBuildBloc()},deep:!0}},methods:{remove_block:function(e){this.blocks.splice(e,1)},PrepareBuildBloc:function(){this.article.id?this.buildBloc():alert("Error: le type d'entitté n'est pas pris en compte ")},buildBloc:function(){this.article_video="";var e=this.metafields.length;if(e)for(var t in this.metafields){var i=this.metafields[t];i.key===this.metafield_name&&(this.article_video=i.value)}},save_reference:function(){this.$emit("ev_index",{action:"save_metafield",key:this.metafield_name,value:this.article_video,type_metafield:"string",type:"article",id_entity:this.article.id,id_parent:this.article.blog_id})}}},U=L,D=Object(m["a"])(U,N,M,!1,null,null,null),H=D.exports;if(window.jQuery)var Y=window.jQuery;if(window.moment)var J=window.moment;var Q={name:"PageArticle",props:{},components:{ajax:n["a"],"modal-slot":r["default"]},data:function(){return{trigger_request:0,data_post:{},ajax_token:"",show_alert_msg:!1,ajax_messages:{msg:"",type:""},id_modal:"action-article",modal_title:"",modal_action:"",template_modalbody:"",table_id:"table-datas",articles:[],article_select:{},metafields:[],blogs:[],form_running:!1,modal_loading:!1,blogs_select:[],datatable:{},composant:{},table_loading:!1}},mounted:function(){this.databaseConfig=o["a"].databaseConfig,this.getBlocs()},methods:{select_remove_blog:function(){},filtrageEnfunctionIdBlog:function(e){var t=this;console.log("Nombre de ligne : ",t.datatable.rows().data().length," \n id_blog",e)},getArticles:function(){this.table_loading=!0,this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig,blogs_ids:this.blogs_select},this.ajax_token="shopify_load_all_articles",this.trigger_request++},getBlocs:function(){this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig},this.ajax_token="shopify_load_blogs_with_metafield",this.trigger_request++},ev_ajax_success:function(e){switch(console.log("ev_ajax_success : ",e),e.token){case"shopify_load_all_articles":this.articles=e.return.articles,this.buildTable(),this.table_loading=!1;break;case"shopify_load_articles_metafields":this.modal_loading=!1,this.metafields=e.return.shopify_load_articles_metafields.metafields;break;case"save_metafields":this.form_running=!1,this.close_modal();break;case"shopify_load_blogs_with_metafield":this.blogs=e.return.shopify_load_blog.blogs,this.select_all_blogs();break}},select_all_blogs:function(){this.blogs.length;if(localStorage.getItem("blogs_select"))this.blogs_select=JSON.parse(localStorage.getItem("blogs_select"));else if(!this.blogs_select.length)for(var e in this.blogs){this.blogs_select.push(this.blogs[e].id);parseInt(e)}},ev_ajax_error:function(){},buildTable:function(){var e=this;this.datatable.rows&&(this.datatable.destroy(),Y("#"+this.table_id).empty()),this.datatable=Y("#"+this.table_id).DataTable({data:this.articles,order:[[0,"desc"]],lengthMenu:[[10,30,60,100],[10,30,60,100]],pageLength:10,columns:[{data:"id",title:"# ID "},{data:"title",title:"Titre"},{data:"created_at",title:"Date de creation",render:function(e){return J(e).format("DD/MM/YYYY à HH:mm")},className:"created-at",dateFormat:"MM-dd-YYYY"},{className:"details-control",orderable:!1,data:null,title:"Action",defaultContent:'<select class=" form-control select-action">\n                <option value="" selected> Aucun(e)</option>\n                <option value="ref_blocks">References blocks</option>\n                <option value="type_livre">Type Livre</option>\n                <option value="articles_lier">Articles liés</option>\n                <option value="ingredients">Ingredients</option>\n                <option value="position_image">Position image</option>\n                <option value="article_video">Video</option>\n                </select>'}],rowCallback:function(t,i){Y(t).addClass("bg-"+e.getBlogHandle(i.blog_id))},language:{url:"//cdn.datatables.net/plug-ins/1.10.21/i18n/French.json"}});var t=this.datatable;Y("#"+this.table_id).addClass("light-table table"),Y("#"+this.table_id+" thead").addClass("thead-light table-header"),Y("#"+this.table_id+" tbody").on("click","tr .select-action",(function(){var i=Y(this).val(),a=Y(this).parent().parent();""!==i&&(e.article_select=t.row(a).data(),e.open_modal(e.article_select,i))}))},getBlogHandle:function(e){var t="error";for(var i in this.blogs)if(e==this.blogs[i].id){t=this.blogs[i].handle;break}return t},getBlog:function(e){var t=[];for(var i in this.blogs)if(e==this.blogs[i].id){t=this.blogs[i];break}return t},open_modal:function(e,t){var i=this;i.modal_title=e.title,i.modal_action=t,i.select_template(),Y("#"+i.formated_id_modal).modal("show"),Y("#"+i.formated_id_modal).on("shown.bs.modal",(function(){Y("#"+i.formated_id_modal).off("shown.bs.modal"),i.loadMetafield()}))},close_modal:function(){var e=this;Y("#"+e.formated_id_modal).modal("hide")},loadMetafield:function(){this.modal_loading=!0,this.show_alert_msg=!1,this.data_post={databaseConfig:this.databaseConfig,id_blog:this.article_select.blog_id,id_article:this.article_select.id},this.ajax_token="shopify_load_articles_metafields",this.trigger_request++},saveMetaField:function(e,t,i,a,l){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.show_alert_msg=!0,this.data_post={databaseConfig:this.databaseConfig,metafields:{type_metafield:i,id_entity:a,type:e,key:t,value:l,id_parent:s}},this.ajax_token="save_metafields",this.trigger_request++},select_template:function(){switch(this.modal_action){case"ref_blocks":this.template_modalbody=g;break;case"type_livre":this.template_modalbody=k;break;case"articles_lier":this.template_modalbody=B;break;case"position_image":this.template_modalbody=R;break;case"article_video":this.template_modalbody=H;break;default:this.template_modalbody="";break}this.applyConfigsComponent()},applyConfigsComponent:function(){var e=this;setTimeout((function(){switch(e.composant=e.$refs.composant,e.modal_action){case"articles_lier":e.composant.set_value(e.blogs_select);break}}),150)},save_reference:function(){},add_new_block:function(){},ev_index:function(e){switch(e.action){case"save_metafield":this.form_running=!0,this.saveMetaField(e.type,e.key,e.type_metafield,e.id_entity,e.value,e.id_parent);break;case"update_select_blog":this.blogs_select=e.blogs_select;break}}},computed:{formated_id_modal:{get:function(){return"model-style-"+this.id_modal}}},watch:{blogs_select:{handler:function(e){console.log("Blogs_select : ",e),localStorage.setItem("blogs_select",JSON.stringify(e)),this.getArticles()},deep:!0}}},q=Q,F=(i("c689"),Object(m["a"])(q,l,s,!1,null,null,null));t["default"]=F.exports},"44d2":function(e,t,i){var a=i("b622"),l=i("7c73"),s=i("9bf2"),n=a("unscopables"),o=Array.prototype;void 0==o[n]&&s.f(o,n,{configurable:!0,value:l(null)}),e.exports=function(e){o[n][e]=!0}},"44e7":function(e,t,i){var a=i("861d"),l=i("c6b6"),s=i("b622"),n=s("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==l(e))}},4969:function(e,t,i){},5319:function(e,t,i){"use strict";var a=i("d784"),l=i("825a"),s=i("7b0b"),n=i("50c4"),o=i("a691"),r=i("1d80"),c=i("8aa5"),d=i("14c3"),u=Math.max,_=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,i,a){var g=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=a.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(i,a){var l=r(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,l,a):t.call(String(l),i,a)},function(e,a){if(!g&&v||"string"===typeof a&&-1===a.indexOf(b)){var s=i(t,e,this,a);if(s.done)return s.value}var r=l(e),f=String(this),h="function"===typeof a;h||(a=String(a));var m=r.global;if(m){var x=r.unicode;r.lastIndex=0}var w=[];while(1){var k=d(r,f);if(null===k)break;if(w.push(k),!m)break;var C=String(k[0]);""===C&&(r.lastIndex=c(f,n(r.lastIndex),x))}for(var E="",j=0,A=0;A<w.length;A++){k=w[A];for(var S=String(k[0]),B=u(_(o(k.index),f.length),0),$=[],P=1;P<k.length;P++)$.push(p(k[P]));var O=k.groups;if(h){var T=[S].concat($,B,f);void 0!==O&&T.push(O);var I=String(a.apply(void 0,T))}else I=y(S,f,B,$,O,a);B>=j&&(E+=f.slice(j,B)+I,j=B+S.length)}return E+f.slice(j)}];function y(e,i,a,l,n,o){var r=a+e.length,c=l.length,d=m;return void 0!==n&&(n=s(n),d=h),t.call(o,d,(function(t,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,a);case"'":return i.slice(r);case"<":o=n[s.slice(1,-1)];break;default:var d=+s;if(0===d)return t;if(d>c){var u=f(d/10);return 0===u?t:u<=c?void 0===l[u-1]?s.charAt(1):l[u-1]+s.charAt(1):t}o=l[d-1]}return void 0===o?"":o}))}}))},"5a34":function(e,t,i){var a=i("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},6547:function(e,t,i){var a=i("a691"),l=i("1d80"),s=function(e){return function(t,i){var s,n,o=String(l(t)),r=a(i),c=o.length;return r<0||r>=c?e?"":void 0:(s=o.charCodeAt(r),s<55296||s>56319||r+1===c||(n=o.charCodeAt(r+1))<56320||n>57343?e?o.charAt(r):s:e?o.slice(r,r+2):n-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},"712d":function(e,t,i){"use strict";var a=i("9430"),l=i.n(a);l.a},"8aa5":function(e,t,i){"use strict";var a=i("6547").charAt;e.exports=function(e,t,i){return t+(i?a(e,t).length:1)}},9263:function(e,t,i){"use strict";var a=i("ad6d"),l=i("9f7f"),s=RegExp.prototype.exec,n=String.prototype.replace,o=s,r=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=l.UNSUPPORTED_Y||l.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],u=r||d||c;u&&(o=function(e){var t,i,l,o,u=this,_=c&&u.sticky,f=a.call(u),h=u.source,m=0,p=e;return _&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),p=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(h="(?: "+h+")",p=" "+p,m++),i=new RegExp("^(?:"+h+")",f)),d&&(i=new RegExp("^"+h+"$(?!\\s)",f)),r&&(t=u.lastIndex),l=s.call(_?i:u,p),_?l?(l.input=l.input.slice(m),l[0]=l[0].slice(m),l.index=u.lastIndex,u.lastIndex+=l[0].length):u.lastIndex=0:r&&l&&(u.lastIndex=u.global?l.index+l[0].length:t),d&&l&&l.length>1&&n.call(l[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(l[o]=void 0)})),l}),e.exports=o},9430:function(e,t,i){},"9f7f":function(e,t,i){"use strict";var a=i("d039");function l(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=l("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=l("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,i){"use strict";var a=i("23e7"),l=i("44ad"),s=i("fc6a"),n=i("a640"),o=[].join,r=l!=Object,c=n("join",",");a({target:"Array",proto:!0,forced:r||!c},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},a434:function(e,t,i){"use strict";var a=i("23e7"),l=i("23cb"),s=i("a691"),n=i("50c4"),o=i("7b0b"),r=i("65f0"),c=i("8418"),d=i("1dde"),u=i("ae40"),_=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!_||!f},{splice:function(e,t){var i,a,d,u,_,f,v=o(this),b=n(v.length),y=l(e,b),x=arguments.length;if(0===x?i=a=0:1===x?(i=0,a=b-y):(i=x-2,a=m(h(s(t),0),b-y)),b+i-a>p)throw TypeError(g);for(d=r(v,a),u=0;u<a;u++)_=y+u,_ in v&&c(d,u,v[_]);if(d.length=a,i<a){for(u=y;u<b-a;u++)_=u+a,f=u+i,_ in v?v[f]=v[_]:delete v[f];for(u=b;u>b-a+i;u--)delete v[u-1]}else if(i>a)for(u=b-a;u>y;u--)_=u+a-1,f=u+i-1,_ in v?v[f]=v[_]:delete v[f];for(u=0;u<i;u++)v[u+y]=arguments[u+2];return v.length=b-a+i,d}})},ab13:function(e,t,i){var a=i("b622"),l=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[l]=!1,"/./"[e](t)}catch(a){}}return!1}},ac1f:function(e,t,i){"use strict";var a=i("23e7"),l=i("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(e,t,i){"use strict";var a=i("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c689:function(e,t,i){"use strict";var a=i("4969"),l=i.n(a);l.a},c6de:function(e,t,i){"use strict";i.r(t);var a,l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{class:[e.type_modal_bootstrap?"modal fade":"modal-custom "+e.formated_open_modal_custom],attrs:{id:e.id_modal,role:"dialog","aria-labelledby":e.id_modal+"Label","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-lg",class:e.modal_position,attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[e._t("modal_header",[e._v(" Titre modal ")],{id:e.id_modal+"Label"}),i("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.close_and_false}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])],2),i("div",{staticClass:"modal-body"},[e._t("default",null,{id:e.id_modal+"Label",doaction:e.actionparent,is_runing:e.is_runing})],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show_footer,expression:"show_footer"}],staticClass:"modal-footer "},[e._t("modal_footer",null,{doaction:e.actionparent,is_runing:e.is_runing})],2)])])])])},s=[];i("a9e3");window.jQuery?a=window.jQuery:window.$&&(a=window.$);var n={name:"ModalSimple",props:{datas_modal_body:[Object,Array,String,Number],id_modal:{type:String,default:"myModal"},type_modal_bootstrap:{type:Boolean,default:!0},modal_position:{type:String,default:"modal-dialog-centered"},open_modal_custom:{type:Boolean,default:!1},show_footer:{type:Boolean,default:!0},actionparent:[Object,Array,String,Number],is_runing:{type:[Boolean],default:!1}},data:function(){return{modal_custom_class:""}},computed:{titre_modal:{get:function(){return decodeURIComponent(this.titre_modal_preview)}},formated_open_modal_custom:{get:function(){return this.open_modal_custom?"show-custom-modal":""}}},methods:{ev_modal_simple:function(e){this.$emit("ev_modal_simple",e)},ev_modal_simple_footer:function(e){this.$emit("ev_modal_simple_footer",e)},close_and_false:function(){this.type_modal_bootstrap?a("#"+this.id_modal).modal("hide"):this.$emit("ev_modal_simple",{action:"close"})},close_modal_confirm:function(){alert("")}}},o=n,r=(i("712d"),i("2877")),c=Object(r["a"])(o,l,s,!1,null,"014b11f9",null);t["default"]=c.exports},caad:function(e,t,i){"use strict";var a=i("23e7"),l=i("4d64").includes,s=i("44d2"),n=i("ae40"),o=n("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!o},{includes:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},d784:function(e,t,i){"use strict";i("ac1f");var a=i("6eeb"),l=i("d039"),s=i("b622"),n=i("9263"),o=i("9112"),r=s("species"),c=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),u=s("replace"),_=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),f=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,u){var h=s(e),m=!l((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),p=m&&!l((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[r]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return t=!0,null},i[h](""),!t}));if(!m||!p||"replace"===e&&(!c||!d||_)||"split"===e&&!f){var g=/./[h],v=i(h,""[e],(function(e,t,i,a,l){return t.exec===n?m&&!l?{done:!0,value:g.call(t,i,a)}:{done:!0,value:e.call(i,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:_}),b=v[0],y=v[1];a(String.prototype,e,b),a(RegExp.prototype,h,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}u&&o(RegExp.prototype[h],"sham",!0)}}}]);
//# sourceMappingURL=NutribeShopify.umd.min.1.js.map